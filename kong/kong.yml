_format_version: "3.0"

plugins:
  - name: cors
    config:
      origins:
        - "http://localhost:3000"
        - "http://127.0.0.1:3000"
      methods:
        - GET
        - POST
        - PUT
        - DELETE
        - OPTIONS
        - PATCH
      headers:
        - Accept
        - Accept-Version
        - Content-Length
        - Content-MD5
        - Content-Type
        - Date
        - X-Auth-Token
        - Authorization
      exposed_headers:
        - X-Auth-Token
        - Set-Cookie
      credentials: true
      max_age: 3600

services:
  # Core Authentication Service
  - name: auth-service
    url: http://auth-service:8010
    routes:
      - name: auth
        paths:
          - /api/auth
        strip_path: true
        path_handling: v0

  # User Management Service
  - name: user-service
    url: http://user-service:8011
    routes:
      - name: users
        paths:
          - /api/users
        strip_path: true
        path_handling: v0

  # Department Management Service
  - name: department-service
    url: http://department-service:8012
    routes:
      - name: departments
        paths:
          - /api/departments
        strip_path: true
        path_handling: v0

  # Class Management Service
  - name: classes-service
    url: http://classes-service:8004
    routes:
      - name: classes
        paths:
          - /api/classes
        strip_path: true
        path_handling: v0

  # Subject Management Service
  - name: subjects-service
    url: http://subjects-service:8005
    routes:
      - name: subjects
        paths:
          - /api/subjects
        strip_path: true
        path_handling: v0

  # Semester Management Service
  - name: semesters-service
    url: http://semesters-service:8006
    routes:
      - name: semesters
        paths:
          - /api/semesters
        strip_path: true
        path_handling: v0

  # Exam and Question Management Service
  - name: exams-service
    url: http://exams-service:8013
    routes:
      - name: exams
        paths:
          - /api/exams
          - /api/questions
        strip_path: true
        path_handling: v0

  # Marks Management Service
  - name: marks-service
    url: http://marks-service:8014
    routes:
      - name: marks
        paths:
          - /api/marks
        strip_path: true
        path_handling: v0

  # Analytics and Reporting Service
  - name: analytics-service
    url: http://analytics-service:8015
    routes:
      - name: analytics
        paths:
          - /api/analytics
        strip_path: true
        path_handling: v0

  # Notification Service
  - name: notification-service
    url: http://notification-service:8018
    routes:
      - name: notifications
        paths:
          - /api/notifications
        strip_path: true
        path_handling: v0

  # CO/PO Management Service
  - name: copo-service
    url: http://copo-service:8026
    routes:
      - name: copo
        paths:
          - /api/cos
          - /api/pos
          - /api/copo-mappings
          - /api/copo
        strip_path: true
        path_handling: v0