_format_version: "3.0"

services:
  # Auth Service
  - name: auth-service
    url: http://auth-service:8010/
    routes:
      - name: auth-route
        strip_path: true
        paths:
          - /auth
      - name: auth-api-route
        strip_path: true
        paths:
          - /api/auth

  # User Service
  - name: user-service
    url: http://user-service:8011/
    routes:
      - name: user-route
        strip_path: true
        paths:
          - /users
      - name: user-api-route
        strip_path: true
        paths:
          - /api/users

  # Department Service
  - name: department-service
    url: http://department-service:8012/
    routes:
      - name: department-route
        strip_path: true
        paths:
          - /departments
      - name: department-api-route
        strip_path: true
        paths:
          - /api/departments

  # Classes Service
  - name: classes-service
    url: http://classes-service:8004/
    routes:
      - name: classes-route
        strip_path: true
        paths:
          - /classes
      - name: classes-api-route
        strip_path: true
        paths:
          - /api/classes

  # Subjects Service
  - name: subjects-service
    url: http://subjects-service:8005/
    routes:
      - name: subjects-route
        strip_path: true
        paths:
          - /subjects
      - name: subjects-api-route
        strip_path: true
        paths:
          - /api/subjects

  # Semesters Service
  - name: semesters-service
    url: http://semesters-service:8006/
    routes:
      - name: semesters-route
        strip_path: true
        paths:
          - /semesters
      - name: semesters-api-route
        strip_path: true
        paths:
          - /api/semesters

  # Exams Service
  - name: exams-service
    url: http://exams-service:8013/
    routes:
      - name: exams-route
        strip_path: true
        paths:
          - /exams
      - name: exams-api-route
        strip_path: true
        paths:
          - /api/exams

  # Marks Service
  - name: marks-service
    url: http://marks-service:8014/
    routes:
      - name: marks-route
        strip_path: true
        paths:
          - /marks
      - name: marks-api-route
        strip_path: true
        paths:
          - /api/marks

  # Analytics Service
  - name: analytics-service
    url: http://analytics-service:8015/
    routes:
      - name: analytics-route
        strip_path: true
        paths:
          - /analytics
      - name: analytics-api-route
        strip_path: false
        paths:
          - /api/analytics

  # Notifications Service
  - name: notification-service
    url: http://notification-service:8018/
    routes:
      - name: notification-route
        strip_path: true
        paths:
          - /notifications
      - name: notification-api-route
        strip_path: true
        paths:
          - /api/notifications

  # COPO Service
  - name: copo-service
    url: http://copo-service:8026/
    routes:
      - name: copo-route
        strip_path: true
        paths:
          - /copo
      - name: copo-api-route
        strip_path: false
        paths:
          - /api/copo

plugins:
  - name: cors
    config:
      origins:
        - "http://localhost:3000"
        - "http://127.0.0.1:3000"
        - "http://172.31.14.251:3000"
      methods:
        - GET
        - POST
        - PUT
        - DELETE
        - OPTIONS
      headers:
        - Accept
        - Accept-Version
        - Content-Length
        - Content-MD5
        - Content-Type
        - Date
        - X-Auth-Token
        - Authorization
      exposed_headers:
        - X-Auth-Token
      credentials: true
      max_age: 3600
